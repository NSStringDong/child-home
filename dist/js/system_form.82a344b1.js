(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["system_form"],{"089f":function(e,t,a){},"0d6d8":function(e,t,a){var n=a("d3f4"),r=a("67ab").onFreeze;a("5eda")("freeze",(function(e){return function(t){return e&&n(t)?e(r(t)):t}}))},"1bff":function(e,t,a){"use strict";a.r(t);var n=a("bc85"),r=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=r.a},"60ec":function(e,t,a){"use strict";var n=a("089f"),r=a.n(n);r.a},"67ab":function(e,t,a){var n=a("ca5a")("meta"),r=a("d3f4"),i=a("69a8"),o=a("86cc").f,l=0,s=Object.isExtensible||function(){return!0},u=!a("79e5")((function(){return s(Object.preventExtensions({}))})),c=function(e){o(e,n,{value:{i:"O"+ ++l,w:{}}})},p=function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,n)){if(!s(e))return"F";if(!t)return"E";c(e)}return e[n].i},f=function(e,t){if(!i(e,n)){if(!s(e))return!0;if(!t)return!1;c(e)}return e[n].w},d=function(e){return u&&m.NEED&&s(e)&&!i(e,n)&&c(e),e},m=e.exports={KEY:n,NEED:!1,fastKey:p,getWeak:f,onFreeze:d}},"6ecc":function(e,t,a){"use strict";a.r(t);var n=a("78ec"),r=a("1bff");for(var i in r)"default"!==i&&function(e){a.d(t,e,(function(){return r[e]}))}(i);a("60ec");var o=a("2877"),l=Object(o["a"])(r["default"],n["a"],n["b"],!1,null,"d2cbe004",null);t["default"]=l.exports},"78ec":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"list-content"},[a("div",{staticClass:"search-content"},[a("div",{staticClass:"search-input"},[a("el-input",{attrs:{placeholder:"请输入员工姓名查询",clearable:""},model:{value:e.key,callback:function(t){e.key=t},expression:"key"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1),a("div",{staticClass:"search-btn"},[a("el-button",{staticClass:"new-btn",attrs:{type:"primary"},on:{click:e.showCreate}},[e._v("新增组织")])],1)]),a("div",{staticClass:"table-content"},[a("el-table",{attrs:{data:e.tableData,border:"",stripe:""},on:{"cell-dblclick":e.goToDetail}},[a("el-table-column",{attrs:{align:"center",prop:"id",label:"ID"}}),a("el-table-column",{attrs:{align:"center",prop:"name",label:"部门名称"}}),a("el-table-column",{attrs:{align:"center",prop:"status",label:"状态"}}),a("el-table-column",{attrs:{align:"center",prop:"createTime",label:"添加时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.createTime.substring(0,10)))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",samll:""},on:{click:function(a){return e.showUpdate(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",samll:""},on:{click:function(a){return e.showDeleteOrganization(t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","current-page":e.nowPage,"page-size":20,layout:"prev, pager, next, jumper","page-count":e.totalPage},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.nowPage=t},"update:current-page":function(t){e.nowPage=t}}})],1),a("el-dialog",{attrs:{title:e.changeText,visible:e.isNew,center:"",width:"35%"},on:{"update:visible":function(t){e.isNew=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"父级组织",prop:"partnerType","label-width":e.formLabelWidth}},[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},model:{value:e.ruleForm.partnerType,callback:function(t){e.$set(e.ruleForm,"partnerType",t)},expression:"ruleForm.partnerType"}},e._l(e.partnerTypeDic,(function(e){return a("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})})),1),a("el-select",{staticStyle:{width:"100px","margin-left":"10px"},attrs:{placeholder:"请选择"},model:{value:e.ruleForm.partnerType,callback:function(t){e.$set(e.ruleForm,"partnerType",t)},expression:"ruleForm.partnerType"}},e._l(e.partnerTypeDic,(function(e){return a("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})})),1),a("el-select",{staticStyle:{width:"100px","margin-left":"10px"},attrs:{placeholder:"请选择"},model:{value:e.ruleForm.partnerType,callback:function(t){e.$set(e.ruleForm,"partnerType",t)},expression:"ruleForm.partnerType"}},e._l(e.partnerTypeDic,(function(e){return a("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"组织名称",prop:"organizName","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm.organizName,callback:function(t){e.$set(e.ruleForm,"organizName",t)},expression:"ruleForm.organizName"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.isNew=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.isLoading,disabled:e.isLock},on:{click:e.createNewOrganization}},[e._v("确 定")])],1)],1)],1)])},r=[];a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r}))},bc85:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("7f7f"),a("0d6d8");a("25a9");var n={name:"system_form",data:function(){var e=this,t=function(t,a,n){""===a?(n(new Error("请选择父级组织")),e.isDisable=!0):(""!==e.ruleForm.organizName&&e.$refs.ruleForm.validateField("organizName"),n())},a=function(t,a,n){""===a?(n(new Error("请输入组织名称")),e.isLock=!0):(e.isLock=!1,n())};return{key:"",tableData:[],nowPage:null,totalPage:null,searchDate:"",formLabelWidth:"80px",partnerTypeDic:Object.freeze([{text:"请选择",value:""},{text:"小绿人",value:"0"},{text:"电动汽车物业",value:"1"},{text:"安装商",value:"2"},{text:"4S店",value:"3"},{text:"车企",value:"4"},{text:"自行车物业",value:"5"},{text:"自行车站主",value:"6"},{text:"代理商",value:"7"}]),isNew:!1,isLoading:!1,isLock:!0,changeText:"",isUpdate:!1,ruleForm:{partnerType:"",organizName:""},rules:{partnerType:[{validator:t,trigger:"change"}],organizName:[{validator:a,trigger:"change"}]}}},created:function(){this.getOrganizationList(1)},mounted:function(){},watch:{isNew:function(e){0==e&&(this.ruleForm.partnerType="",this.ruleForm.organizName="",this.changeText="",this.isLock=!0,this.isUpdate=!1)}},methods:{getOrganizationList:function(e){var t=this;t.nowPage=e,t.tableData=[];var a={rows:20,page:e};this.$http({url:"system/organization/list",method:"POST",data:a}).then((function(e){console.info("res",e),t.tableData=e.rows,t.totalPage=20%e.total}))},goToDetail:function(e){},showCreate:function(){this.isNew=!0,this.changeText="新增组织"},showUpdate:function(e){this.isNew=!0,this.changeText="更新组织",this.isUpdate=!0,this.ruleForm.partnerType=e.pid,this.ruleForm.organizName=e.name},createNewOrganization:function(){var e=this,t=this,a="",n="";a=1==this.isUpdate?"system/organization/update":"system/organization/add",t.isLoading=!0,this.$http({url:a,method:"POST",data:{name:t.ruleForm.organizName,pid:t.ruleForm.partnerType,status:1}}).then((function(a){setTimeout((function(){a.code>=0?(n=1==e.isUpdate?"更新成功":"新增成功",e.isLoading=!1,e.isNew=!1,e.$message.success(n),e.getOrganizationList(1)):t.$message({showClose:!0,message:a.data.msg,type:"error"})}),1500)}))},showDeleteOrganization:function(e){var t=this;this.$confirm("确认删除".concat(e.name,"组织？"),"删除组织",{confirmButtonText:"是",cancelButtonText:"否",type:"warning",distinguishCancelAndClose:!0,beforeClose:function(a,n,r){"confirm"===a?(n.confirmButtonLoading=!0,n.confirmButtonText="执行中...",setTimeout((function(){r(),setTimeout((function(){t.deleteOrganization(e),n.confirmButtonLoading=!1}),300)}),3e3)):r()}}).then((function(){})).catch((function(e){"close"!==e&&"cancel"!==e||t.$message({type:"info",message:"放弃操作"})}))},deleteOrganization:function(e){var t=this,a=this,n={id:e.id};this.$http({url:"system/organization/delete",method:"POST",data:n}).then((function(e){e.code>=0?(t.$message.success("删除成功"),t.getOrganizationList(1)):a.$message({showClose:!0,message:e.data.msg,type:"error"})}))},filterHandler:function(e){var t=this,a=null;for(var n in e)n,a=e[n];t.partnerType=a[0],null!=t.partnerType&&void 0!=t.partnerType||(t.partnerType=""),t.getOrganizationList(t.nowPage)},handleCurrentChange:function(e){this.getOrganizationList(e)}},filters:{}};t.default=n,e.exports=t.default}}]);